<!DOCTYPE html>
<!--
    Type on Strap jekyll theme v2.3.4
    Copyright 2016-2021 Sylhare
    Theme free for personal and commercial use under the MIT license
    https://github.com/sylhare/Type-on-Strap/blob/master/LICENSE
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=5">

    <!-- Main JS (navbar.js, katex_init.js and masonry_init.js)-->
    <script defer src="/assets/js/main.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!--Favicon-->
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="CodingFeline" href="https://www.yslibrary.net/feed.xml"/>
    
    

    <!-- KaTeX 0.12.0 -->
    
    <script defer src="/assets/js/vendor/katex.min.js"></script>
    <script defer src="/assets/js/vendor/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
    

    <!-- Mermaid 8.9.2 -->
    

    <!-- Simple Jekyll Search 1.9.1 -->
    <script src="/assets/js/vendor/simple-jekyll-search.min.js" type="text/javascript"></script>

    <!-- Google Analytics / Cookie Consent -->
    <script>
      const cookieName = 'cookie-notice-dismissed-https://www.yslibrary.net';
      const isCookieConsent = 'false';
      const analyticsName = 'UA-61198465-1';
    </script>

    
    
        <!-- Global site tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-61198465-1"></script>
        <!-- Page analysis (analytics.js) -->
        <script async src='https://www.google-analytics.com/analytics.js'></script>
    

    <!-- seo tags -->
    <meta property="og:image" content="https://www.yslibrary.net/assets/img/dactyl.jpeg">
    
    <meta property="og:type" content="website" />
    
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>(KMP) Ignore some commonTests in a specific platform | CodingFeline</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="(KMP) Ignore some commonTests in a specific platform" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In Kotlin Multiplatform Project, it is common to write tests in commonTest, as you can run it on all platforms you configured. However, while you want to make test “common” as much as you can, there might be some test cases you can’t run on some specific platform. So, what to do?" />
<meta property="og:description" content="In Kotlin Multiplatform Project, it is common to write tests in commonTest, as you can run it on all platforms you configured. However, while you want to make test “common” as much as you can, there might be some test cases you can’t run on some specific platform. So, what to do?" />
<link rel="canonical" href="https://www.yslibrary.net/2019/07/25/ignoring-tests-in-particular-platform-kotlin-mpp-en/" />
<meta property="og:url" content="https://www.yslibrary.net/2019/07/25/ignoring-tests-in-particular-platform-kotlin-mpp-en/" />
<meta property="og:site_name" content="CodingFeline" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-07-25T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="(KMP) Ignore some commonTests in a specific platform" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.yslibrary.net/2019/07/25/ignoring-tests-in-particular-platform-kotlin-mpp-en/"},"description":"In Kotlin Multiplatform Project, it is common to write tests in commonTest, as you can run it on all platforms you configured. However, while you want to make test “common” as much as you can, there might be some test cases you can’t run on some specific platform. So, what to do?","url":"https://www.yslibrary.net/2019/07/25/ignoring-tests-in-particular-platform-kotlin-mpp-en/","@type":"BlogPosting","headline":"(KMP) Ignore some commonTests in a specific platform","dateModified":"2019-07-25T00:00:00+00:00","datePublished":"2019-07-25T00:00:00+00:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <!-- RSS -->
    <link type="application/atom+xml" rel="alternate" href="https://www.yslibrary.net/feed.xml" title="CodingFeline" />

    <!-- Twitter Cards -->
    <meta name="twitter:title" content="(KMP) Ignore some commonTests in a specific platform">
    <meta name="twitter:description" content="In Kotlin Multiplatform Project, it is common to write tests in commonTest, as you can run it on all platforms you configured. However, while you want to mak...">
    
    <meta name="twitter:creator" content="@_yshrsmz">
    <meta name="twitter:site" content="@_yshrsmz">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://www.yslibrary.net/assets/img/dactyl.jpeg">
    <meta name="twitter:image:alt" content="(KMP) Ignore some commonTests in a specific platform">
</head>

  <body>
    <header class="site-header">

    <!-- Logo and title -->
	<div class="branding">
        
		<a href="/">
			<img alt="logo img" class="avatar" src="/assets/img/logo.png" />
		</a>
        
        <a class="site-title" aria-label="CodingFeline" href="/">
        CodingFeline
		</a>
	</div>

    <!-- Toggle menu -->
    <nav class="clear">
    <a aria-label="pull" id="pull" class="toggle" href="#">
    <i class="fas fa-bars fa-lg"></i>
    </a>

    <!-- Menu -->
    <ul class="hide">
        

        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="ABOUT" title="ABOUT" href="/about/">
                     ABOUT 
                </a>
            </li>
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="PRODUCTS" title="PRODUCTS" href="/products/">
                     PRODUCTS 
                </a>
            </li>
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Search" title="Search" href="/search/">
                     <i class="fas fa-search" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Tags" title="Tags" href="/tags/">
                     <i class="fas fa-tags" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
    </ul>

	</nav>
</header>

    <div class="content">
      <article >
  <header id="main" style="">
    <div class="title-padder">
      
      <h1 id="%28KMP%29+Ignore+some+commonTests+in+a+specific+platform" class="title">(KMP) Ignore some commonTests in a specific platform</h1>
      


<div class="post-info">
    <p class="meta">
      
      
      July 25, 2019
    </p></div>

      
    </div>
  </header>

  <section class="post-content">
  
      <p>In Kotlin Multiplatform Project, it is common to write tests in <code class="language-plaintext highlighter-rouge">commonTest</code>, as you can run it on all platforms you configured. However, while you want to make test “common” as much as you can, there might be some test cases you can’t run on some specific platform. So, what to do?</p>

<p>A very naive way is to move those “non-common” test cases to platform-specific test directories. It is okay if you only target two platforms, but what if you want 3 or more target platforms? I don’t think it’s a good practice to have the same test cases in several platform-specific test directories.</p>

<p>So here’s the thing. Kotlin Multiplatform Project has ‘expect/actual mechanism’, with which you can provide platform-specific declarations. With this, you can declare custom <code class="language-plaintext highlighter-rouge">@Ignore</code> annotation, which selectively ignores test cases on specific platforms.</p>

<p>Assume you have 2 target platforms; Android and iOS. <br />
You want to create an annotation which tells test runner to ignore the annotated cases/classes on iOS.</p>

<p>First, you need to need the ‘expect’ declaration in common code.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// commonMain</span>
<span class="nd">@Target</span><span class="p">(</span><span class="nc">AnnotationTarget</span><span class="p">.</span><span class="nc">CLASS</span><span class="p">,</span> <span class="nc">AnnotationTarget</span><span class="p">.</span><span class="nc">FUNCTION</span><span class="p">)</span>
<span class="n">expect</span> <span class="k">annotation</span> <span class="kd">class</span> <span class="nc">IgnoreIos</span>
</code></pre></div></div>

<p>Then you need to write corresponding ‘actual’ declarations in each platform.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// androidMain</span>
<span class="nd">@Target</span><span class="p">(</span><span class="nc">AnnotationTarget</span><span class="p">.</span><span class="nc">CLASS</span><span class="p">,</span> <span class="nc">AnnotationTarget</span><span class="p">.</span><span class="nc">FUNCTION</span><span class="p">)</span>
<span class="n">actual</span> <span class="k">annotation</span> <span class="kd">class</span> <span class="nc">IgnoreIos</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// iosMain</span>
<span class="n">actual</span> <span class="k">typealias</span> <span class="nc">IgnoreIos</span> <span class="p">=</span> <span class="n">kotlin</span><span class="p">.</span><span class="n">test</span><span class="p">.</span><span class="nc">Ignore</span>
</code></pre></div></div>

<p>The key point here is in iOS ‘IgnoreIos’ is a typealias for <code class="language-plaintext highlighter-rouge">kotlin.test.Ignore</code>, but it’s just a useless annotation in Android. So it works as <code class="language-plaintext highlighter-rouge">kotlin.test.Ignore</code> in iOS but does nothing in Android.</p>

    
  </section>

  <!-- Social media shares -->
  

<div class="share-buttons">
    <ul class="share-buttons">
        <div class="meta">Share</div>
        
        <li>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.yslibrary.net/2019/07/25/ignoring-tests-in-particular-platform-kotlin-mpp-en/" target="_blank" title=" Facebook">
			<i class="fab fa-facebook-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Share on Facebook</span>
		</a>
        </li>
         
        <li>
            <a href="https://twitter.com/intent/tweet?text=%28KMP%29+Ignore+some+commonTests+in+a+specific+platform%20https%3A%2F%2Fwww.yslibrary.net%2F2019%2F07%2F25%2Fignoring-tests-in-particular-platform-kotlin-mpp-en%2F" target="_blank" title="">
			<i class="fab fa-twitter-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Tweet</span>
		</a>
        </li>
            
        <li>
            <a href="https://www.reddit.com/submit?url=https://www.yslibrary.net/2019/07/25/ignoring-tests-in-particular-platform-kotlin-mpp-en/&title=%28KMP%29+Ignore+some+commonTests+in+a+specific+platform%20%7C%20CodingFeline" target="_blank" title=" Reddit">
			<i class="fab fa-reddit-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Share on Reddit</span>
		</a>
        </li>
           
        <li>
            <a href="mailto:?subject=(KMP) Ignore some commonTests in a specific platform%20%7C%20CodingFeline&body=https://www.yslibrary.net/2019/07/25/ignoring-tests-in-particular-platform-kotlin-mpp-en/" target="_blank" title="">
			<i class="fas fa-envelope-square fa-2x" aria-hidden="true"></i>
			<span class="sr-only">Email</span>
		</a>
        </li>
        
    </ul>
</div>




   <!-- Tag list -->
  
  


  <div class="tag-list">
    <ul>
      
        <li class="meta">Tags</li>
      

      
        <li><a class="button" href="/tags#english">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> english</p>
        </a></li>
      
        <li><a class="button" href="/tags#kmp">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> kmp</p>
        </a></li>
      
        <li><a class="button" href="/tags#kotlin">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> kotlin</p>
        </a></li>
      
    </ul>
  </div>



</article>

<!-- Disqus -->

<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'yslibrary';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view comments.</noscript>
</div>


<!-- Post navigation -->

  <div id="post-nav">
    
    <div id="previous-post">
        <a alt="(KMP) commonTestをRobolectricで実行する" href="/2019/11/06/robolectric-and-kotlin-mpp-commontest/">
            <p>Previous post</p>
            (KMP) commonTestをRobolectricで実行する
        </a>
    </div>
    

    
    <div id="next-post">
        <a alt="Using Kotlin Coroutines and Channel from Swift" href="/2019/06/14/using-coroutines-from-swift-en/">
            <p>Next post</p>
            Using Kotlin Coroutines and Channel from Swift
        </a>
    </div>
    
</div>



<!-- To change color of links in the page -->
<style>
  header#main {
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
  }
  
  
  
  
</style>

    </div>
    <footer class="site-footer">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- yslibrary.net - bottom -->
<ins class="adsbygoogle"
     style="display:block; margin-top:10px; margin-bottom:10px;"
     data-ad-client="ca-pub-1022395241918455"
     data-ad-slot="6501231341"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

    <p class="text">
        © 2020, yshrsmz</p>
            <div class="footer-icons">
                <ul>
                <!-- Social icons from Font Awesome, if enabled -->
                
<li>
    <a feed.xml href="http://feeds.feedburner.com/TheoreticalCat"
       title="Follow RSS feed">
        <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>















<li>
    <a href="https://github.com/yshrsmz" title="Follow on GitHub">
		<span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-github fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>







<li>
    <a href="https://www.linkedin.com/in/yshrsmz/" title="Follow on LinkedIn">
		<span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>





<li>
    <a href="https://www.reddit.com/user/yshrsmz"
       title="Follow on Reddit">
		<span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-reddit fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>





<li>
    <a href="https://stackexchange.com/users/456702/yshrsmz" title="Follow on Stack Exchange">
		<span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-stack-exchange fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>



<li>
    <a href="https://stackoverflow.com/users/855599/yshrsmz" title="Follow on Stack Overflow">
		<span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>









<li>
    <a class="type" href="https://twitter.com/_yshrsmz"
       title="Follow on Twitter">
        <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>








                </ul>
            </div>
</footer>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>


  </body>
</html>
